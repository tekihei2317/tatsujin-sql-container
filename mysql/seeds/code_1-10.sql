CREATE DATABASE Chapter10;
USE Chapter10;

-- 連番を作ろう
CREATE TABLE Digits(
  digit INTEGER PRIMARY KEY
); 

INSERT INTO Digits VALUES (0);
INSERT INTO Digits VALUES (1);
INSERT INTO Digits VALUES (2);
INSERT INTO Digits VALUES (3);
INSERT INTO Digits VALUES (4);
INSERT INTO Digits VALUES (5);
INSERT INTO Digits VALUES (6);
INSERT INTO Digits VALUES (7);
INSERT INTO Digits VALUES (8);
INSERT INTO Digits VALUES (9);

-- 欠番を全部求める
CREATE TABLE SeqTbl(
  seq INTEGER PRIMARY KEY
); 

INSERT INTO SeqTbl VALUES (1);
INSERT INTO SeqTbl VALUES (2);
INSERT INTO SeqTbl VALUES (4);
INSERT INTO SeqTbl VALUES (5);
INSERT INTO SeqTbl VALUES (6);
INSERT INTO SeqTbl VALUES (7);
INSERT INTO SeqTbl VALUES (8);
INSERT INTO SeqTbl VALUES (11);
INSERT INTO SeqTbl VALUES (12);

-- 3人なんですけど、座れますか？
CREATE TABLE Seats(
  seat   INTEGER NOT NULL  PRIMARY KEY,
  status CHAR(2) NOT NULL
  CHECK (status IN ('空', '占'))
); 

INSERT INTO Seats VALUES (1,  '占');
INSERT INTO Seats VALUES (2,  '占');
INSERT INTO Seats VALUES (3,  '空');
INSERT INTO Seats VALUES (4,  '空');
INSERT INTO Seats VALUES (5,  '空');
INSERT INTO Seats VALUES (6,  '占');
INSERT INTO Seats VALUES (7,  '空');
INSERT INTO Seats VALUES (8,  '空');
INSERT INTO Seats VALUES (9,  '空');
INSERT INTO Seats VALUES (10, '空');
INSERT INTO Seats VALUES (11, '空');
INSERT INTO Seats VALUES (12, '占');
INSERT INTO Seats VALUES (13, '占');
INSERT INTO Seats VALUES (14, '空');
INSERT INTO Seats VALUES (15, '空');

-- 折り返しも考慮
CREATE TABLE Seats2(
  seat   INTEGER NOT NULL  PRIMARY KEY,
  line_id CHAR(1) NOT NULL,
  status CHAR(2) NOT NULL
  CHECK (status IN ('空', '占'))
);

INSERT INTO Seats2 VALUES (1, 'A', '占');
INSERT INTO Seats2 VALUES (2, 'A', '占');
INSERT INTO Seats2 VALUES (3, 'A', '空');
INSERT INTO Seats2 VALUES (4, 'A', '空');
INSERT INTO Seats2 VALUES (5, 'A', '空');
INSERT INTO Seats2 VALUES (6, 'B', '占');
INSERT INTO Seats2 VALUES (7, 'B', '占');
INSERT INTO Seats2 VALUES (8, 'B', '空');
INSERT INTO Seats2 VALUES (9, 'B', '空');
INSERT INTO Seats2 VALUES (10,'B', '空');
INSERT INTO Seats2 VALUES (11,'C', '空');
INSERT INTO Seats2 VALUES (12,'C', '空');
INSERT INTO Seats2 VALUES (13,'C', '空');
INSERT INTO Seats2 VALUES (14,'C', '占');
INSERT INTO Seats2 VALUES (15,'C', '空');

-- 単調増加と単調減少
CREATE TABLE MyStock(
  deal_date  DATE PRIMARY KEY,
  price      INTEGER
);

INSERT INTO MyStock VALUES ('2018-01-06', 1000);
INSERT INTO MyStock VALUES ('2018-01-08', 1050);
INSERT INTO MyStock VALUES ('2018-01-09', 1050);
INSERT INTO MyStock VALUES ('2018-01-12', 900);
INSERT INTO MyStock VALUES ('2018-01-13', 880);
INSERT INTO MyStock VALUES ('2018-01-14', 870);
INSERT INTO MyStock VALUES ('2018-01-16', 920);
INSERT INTO MyStock VALUES ('2018-01-17', 1000);
INSERT INTO MyStock VALUES ('2018-01-18', 2000);
